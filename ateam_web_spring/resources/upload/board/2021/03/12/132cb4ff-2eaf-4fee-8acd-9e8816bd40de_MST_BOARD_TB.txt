CREATE TABLE MST_BOARD_TB
(
    BOARD_GP           VARCHAR2(2)       NOT NULL, 
    BOARD_NO           NUMBER            NOT NULL, 
    USER_ID            NUMBER            NOT NULL, 
    CREATE_DT          DATE              NOT NULL, 
    UPDATE_DT          DATE              NULL, 
    BOARD_READCOUNT    NUMBER            NOT NULL, 
    BOARD_TITLE        VARCHAR2(20)      NOT NULL, 
    BOARD_CONTENT      VARCHAR2(4000)    NOT NULL, 
    USER_TYPE          VARCHAR2(20)      NULL, 
    CONSTRAINT MST_BOARD_TB_PK PRIMARY KEY (BOARD_NO)
)
/

CREATE SEQUENCE MST_BOARD_TB_SEQ
START WITH 1
INCREMENT BY 1;
/

CREATE OR REPLACE TRIGGER MST_BOARD_TB_AI_TRG
BEFORE INSERT ON MST_BOARD_TB 
REFERENCING NEW AS NEW FOR EACH ROW 
BEGIN 
    SELECT MST_BOARD_TB_SEQ.NEXTVAL
    INTO :NEW.BOARD_NO
    FROM DUAL;
END;
/

--DROP TRIGGER MST_BOARD_TB_AI_TRG;
/

--DROP SEQUENCE MST_BOARD_TB_SEQ;
/

COMMENT ON TABLE MST_BOARD_TB IS '커뮤니티 게시판 테이블'
/

COMMENT ON COLUMN MST_BOARD_TB.BOARD_GP IS '게시판 그룹(1,공지사항, 2,QNA 등..)'
/

COMMENT ON COLUMN MST_BOARD_TB.BOARD_NO IS '게시글 고유번호'
/

COMMENT ON COLUMN MST_BOARD_TB.USER_ID IS '회원 고유번호'
/

COMMENT ON COLUMN MST_BOARD_TB.CREATE_DT IS '작성일'
/

COMMENT ON COLUMN MST_BOARD_TB.UPDATE_DT IS '수정일'
/

COMMENT ON COLUMN MST_BOARD_TB.BOARD_READCOUNT IS '조회수(DEFAULT 0)'
/

COMMENT ON COLUMN MST_BOARD_TB.BOARD_TITLE IS '제목'
/

COMMENT ON COLUMN MST_BOARD_TB.BOARD_CONTENT IS '내용'
/

COMMENT ON COLUMN MST_BOARD_TB.USER_TYPE IS '유저타입'
/

ALTER TABLE MST_BOARD_TB
    ADD CONSTRAINT FK_MST_BOARD_TB_USER_ID_MST_US FOREIGN KEY (USER_ID, USER_TYPE)
        REFERENCES MST_USER_INFO_TB (USER_ID, USER_TYPE)
/